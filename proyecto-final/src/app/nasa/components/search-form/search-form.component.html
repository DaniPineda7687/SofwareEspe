<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">

  @if (config.apiType === 'apod') {
    <div>
      <h2 class="text-lg font-semibold text-gray-800 mb-4">üîç Buscar Imagen Astron√≥mica</h2>


      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700 mb-2">Modo de b√∫squeda</label>
        <div class="flex gap-2">
          <button
            type="button"
            (click)="apodSearchMode = 'single'"
            [class.bg-blue-600]="apodSearchMode === 'single'"
            [class.text-white]="apodSearchMode === 'single'"
            [class.bg-gray-100]="apodSearchMode !== 'single'"
            [class.text-gray-700]="apodSearchMode !== 'single'"
            class="px-4 py-2 rounded-lg font-medium transition-colors"
          >
            Fecha Espec√≠fica
          </button>
          <button
            type="button"
            (click)="apodSearchMode = 'range'"
            [class.bg-blue-600]="apodSearchMode === 'range'"
            [class.text-white]="apodSearchMode === 'range'"
            [class.bg-gray-100]="apodSearchMode !== 'range'"
            [class.text-gray-700]="apodSearchMode !== 'range'"
            class="px-4 py-2 rounded-lg font-medium transition-colors"
          >
            Rango de Fechas
          </button>
        </div>
      </div>

      <form (ngSubmit)="onApodSearch()" class="space-y-4">

        @if (apodSearchMode === 'single') {
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Selecciona una fecha</label>
            <input
              type="date"
              [(ngModel)]="apodDate"
              name="apodDate"
              [max]="apodDate"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"
            />
          </div>
        }


        @if (apodSearchMode === 'range') {
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de inicio</label>
              <input
                type="date"
                [(ngModel)]="apodStartDate"
                name="apodStartDate"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"
              />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Fecha final</label>
              <input
                type="date"
                [(ngModel)]="apodEndDate"
                name="apodEndDate"
                class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors"
              />
            </div>
          </div>
        }

        <div class="flex justify-end">
          <button
            type="submit"
            [disabled]="isLoading"
            class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2"
          >
            @if (isLoading) {
              <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span>Buscando...</span>
            } @else {
              <span>üîç Buscar</span>
            }
          </button>
        </div>
      </form>
    </div>
  }


  @if (config.apiType === 'mars-rover') {
    <div>
      <h2 class="text-lg font-semibold text-gray-800 mb-4">üîç Buscar Fotos de Mars Rover</h2>

      <form (ngSubmit)="onMarsRoverSearch()" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">ü§ñ Selecciona el Rover</label>
            <select
              [(ngModel)]="marsRover"
              name="marsRover"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors"
            >
              @for (rover of rovers; track rover.value) {
                <option [value]="rover.value">{{ rover.label }}</option>
              }
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">üì∑ C√°mara (opcional)</label>
            <select
              [(ngModel)]="marsCamera"
              name="marsCamera"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors"
            >
              @for (camera of cameras; track camera.value) {
                <option [value]="camera.value">{{ camera.label }}</option>
              }
            </select>
          </div>
        </div>


        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">Buscar por:</label>
          <div class="flex gap-2">
            <button
              type="button"
              (click)="marsSearchMode = 'sol'"
              [class.bg-red-600]="marsSearchMode === 'sol'"
              [class.text-white]="marsSearchMode === 'sol'"
              [class.bg-gray-100]="marsSearchMode !== 'sol'"
              [class.text-gray-700]="marsSearchMode !== 'sol'"
              class="px-4 py-2 rounded-lg font-medium transition-colors"
            >
              Sol (D√≠a Marciano)
            </button>
            <button
              type="button"
              (click)="marsSearchMode = 'earth_date'"
              [class.bg-red-600]="marsSearchMode === 'earth_date'"
              [class.text-white]="marsSearchMode === 'earth_date'"
              [class.bg-gray-100]="marsSearchMode !== 'earth_date'"
              [class.text-gray-700]="marsSearchMode !== 'earth_date'"
              class="px-4 py-2 rounded-lg font-medium transition-colors"
            >
              Fecha Terrestre
            </button>
          </div>
        </div>


        @if (marsSearchMode === 'sol') {
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">
              Sol (D√≠a Marciano)
              <span class="text-xs text-gray-500 font-normal ml-2">Ej: 1000</span>
            </label>
            <input
              type="number"
              [(ngModel)]="marsSol"
              name="marsSol"
              min="0"
              placeholder="1000"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors"
            />
          </div>
        }

        @if (marsSearchMode === 'earth_date') {
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha Terrestre</label>
            <input
              type="date"
              [(ngModel)]="marsEarthDate"
              name="marsEarthDate"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition-colors"
            />
          </div>
        }

        <div class="flex justify-end">
          <button
            type="submit"
            [disabled]="isLoading"
            class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2"
          >
            @if (isLoading) {
              <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span>Buscando...</span>
            } @else {
              <span>üîç Buscar Fotos</span>
            }
          </button>
        </div>
      </form>
    </div>
  }


  @if (config.apiType === 'neo') {
    <div>
      <h2 class="text-lg font-semibold text-gray-800 mb-4">üîç Buscar Objetos Cercanos a la Tierra</h2>

      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4">
        <p class="text-sm text-yellow-800">
          ‚ö†Ô∏è El rango de fechas no puede ser mayor a 7 d√≠as
        </p>
      </div>

      <form (ngSubmit)="onNeoSearch()" class="space-y-4">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha de inicio</label>
            <input
              type="date"
              [(ngModel)]="neoStartDate"
              name="neoStartDate"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors"
            />
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Fecha final</label>
            <input
              type="date"
              [(ngModel)]="neoEndDate"
              name="neoEndDate"
              required
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 outline-none transition-colors"
            />
          </div>
        </div>

        <div class="flex justify-end">
          <button
            type="submit"
            [disabled]="isLoading || !neoStartDate || !neoEndDate"
            class="px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2"
          >
            @if (isLoading) {
              <svg class="animate-spin h-4 w-4" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 714 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span>Buscando...</span>
            } @else {
              <span>üîç Buscar NEOs</span>
            }
          </button>
        </div>
      </form>
    </div>
  }
</div>
